<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Payments across payment networks">

    <title>Interledger Dynamic Configuration Protocol | Interledger</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="/css/monokai-sublime.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700|Droid+Sans+Mono|Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">

    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target="#myScrollspy" data-offset="160" class="spec">

     <!-- navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img class="logo" alt="interledger" src="/assets/ilp_icon.png"/></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="/overview.html">Docs</a></li>
              <li><a href="/community.html">Community</a></li>
              <li><a href="/news.html">News</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a target="_blank" href="https://github.com/interledger">Github</a></li>
            </ul>
          </div>
        </div>
      </nav>

    <!-- docs overview section -->

    <div class="container docs-wrapper">
      <div class="row">
        <div id="sidebarContent">
          <nav class="col-sm-4" id="myScrollspy">
            <ul class="nav-fixed nav nav-sidebar">
              <div class="overview-back"><a href="/overview.html"><i class="fa fa-angle-double-left" aria-hidden="true"></i> Back to Overview</a></div>
                <li class="nav-label">
                  <a href="./draft-2.html">ILP-RFC 0031 Draft 2</a>
                </li>
                <li>
                  <a href="./draft-2.html">Permalink to this Draft</a>
                </li>
                <li>
                  <a href="./">View the Latest Draft of ILP-RFC 0031</a>
                </li>
              
                <li class="nav-label">
                  <a href="#prerequisites">Prerequisites</a>
                </li>
              
                <li class="nav-label">
                  <a href="#terminology">Terminology</a>
                </li>
              
                <li class="nav-label">
                  <a href="#overview">Overview</a>
                </li>
              
                <li class="nav-label">
                  <a href="#protocol-detail">Protocol Detail</a>
                </li>
              
                <li>
                  <a href="#procedure">Procedure</a>
                </li>
              
                <li>
                  <a href="#packet">Packet</a>
                </li>
              
                <li>
                  <a href="#asn1-definition">ASN.1 Definition</a>
                </li>
              
                <li>
                  <a href="#encoding">Encoding</a>
                </li>
              
            </ul>
          </nav>
        </div>
        <div class="col-sm-8 markdown-body">
                      <h1 id="interledger-dynamic-configuration-protocol-ildcp-v1">Interledger Dynamic Configuration Protocol (ILDCP) v1</h1>
<h2 id="prerequisites">Prerequisites</h2>
<p class="intro">This specification assumes the reader is familiar with the following documents:</p>
<ul>
<li><a href="../0001-interledger-architecture">Interledger Architecture</a></li>
<li><a href="../0027-interledger-protocol-4">Interledger Protocol V4 (ILPv4)</a></li>
</ul>
<h2 id="terminology">Terminology</h2>
<ul>
<li>A <strong>node</strong> is a participant in an Interledger network. It may be a <a href="../0001-interledger-architecture#connectors">connector</a>, a sender or a receiver. </li>
<li>Nodes are connected to each other and the relationship between two nodes is either:<ul>
<li><code>parent</code> and <code>child</code> (one node is the <code>parent</code> of another node that is relatively its <code>child</code>), or,</li>
<li><code>peer</code> and <code>peer</code> (two nodes are peered with one another).</li>
</ul>
</li>
</ul>
<h2 id="overview">Overview</h2>
<p>Interledger is a protocol suite that consists of several protocols including the <a href="../0023-bilateral-transfer-protocol">Bilateral Transfer Protocol</a>, the Route Broadcasting Protocol and others necessary for establishment, operation and maintenance of the network. Interledger Dynamic Configuration Protocol (ILDCP) is one of these protocols.</p>
<p>In order to participate in the network a node must have an <a href="../0015-ilp-addresses">ILP address</a>. This address is part of a heirarchical address space where child nodes MAY be allocated addresses within the address space of their parent node. This makes routing on the network more efficient than if all nodes had top-level addresses.</p>
<p>A node is therefore either configured with an address which it broadcasts to its peers or, if the node has a parent in the network hierarchy, the ILP address of the child node can be allocated to it by the parent. This is done using ILDCP.</p>
<p>In short, <strong>ILDCP is a protocol used for transferring node and ledger information from a parent node to a child node</strong>. The transferred information is:</p>
<ul>
<li>An ILP address that the child should use for its own address<ul>
<li>e.g. <code>g.crypto.foo.bar</code></li>
</ul>
</li>
<li>An asset code of the asset that the two nodes will use to settle<ul>
<li>e.g. <code>XRP</code></li>
</ul>
</li>
<li>An asset scale for amounts that will be used in ILP packets exchanged between the nodes.<ul>
<li>e.g. <code>6</code></li>
</ul>
</li>
</ul>
<p>Future versions of the protocol MAY exchange additional configuration information.</p>
<h2 id="protocol-detail">Protocol Detail</h2>
<h3 id="procedure">Procedure</h3>
<p>An exchange of configuration information is done using the following procedure.</p>
<ol>
<li>A child node requests configuration information from the parent node</li>
<li>The parent node responds with the configuration information to the child node</li>
<li>If the request cannot be processed, the parent node responds with an error</li>
</ol>
<h3 id="packet">Packet</h3>
<p>The request and the response above are transferred in <a href="../0027-interledger-protocol-4#specification">ILP packets</a>. </p>
<p>The <code>fulfillment</code> of the response packet is always a zero-filled 32 byte octet string, therefor the condition is always the SHA-256 hash digest of that, i.e. the Base64 decoded value of <code>Zmh6rfhivXdsj8GLjp+OIAiXFIVu4jOzkCpZHQ1fKSU=</code>.</p>
<p>As with other bilateral protocols the packets are addressed directly to the peer using the <code>peer.</code> address prefix. ILDCP packets are specifically identified using the address <code>peer.config</code>.</p>
<p>All current implementations of ILDCP default to an amount of <code>0</code> in the ILP packets used to request configuration. In future, peers may agree to pay a charge for reserving an address, in which case this may become a non-zero amount indicating the amount paid by the child to reserve an address. Future version of the protocol may allow for the child to explicitly request an address which may not be restricted to being in the parent&apos;s address-space.</p>
<p>The packet exchange goes as follows:</p>
<ul>
<li><p>Request</p>
<ul>
<li>The <code>type</code> of the ILP packet is <code>ILP Prepare</code> (type id: 12)</li>
<li>The <code>amount</code> of the ILP packet defaults to <code>0</code>.</li>
<li>The <code>expiresAt</code> of the ILP packet is arbitrary.</li>
<li>The <code>executionCondition</code> of the ILP packet is <code>Zmh6rfhivXdsj8GLjp+OIAiXFIVu4jOzkCpZHQ1fKSU=</code> in Base64 format</li>
<li>The <code>destination</code> address of the ILP packet is <code>peer.config</code></li>
<li>The <code>data</code> of the ILP packet is empty (size: 0)</li>
</ul>
</li>
<li><p>Response</p>
<ul>
<li>The <code>type</code> of the ILP packet is <code>ILP Fulfill</code> (type id: 13)</li>
<li>The <code>fulfillment</code> of the ILP packet is a 32-byte octet string all filled with zeros</li>
<li>The <code>data</code> of the ILP packet takes a specific format and is described by <code>DynamicConfigurationResponseData</code> in the ILDCP <a href="#asn1-definition">ASN.1 definition</a>. It is an OER encoded SEQUENCE of<ul>
<li><code>Variable-length octet string</code>: An ILP address that the child should use, encoded as an <code>ASCII</code> string</li>
<li><code>Uint8</code>: An unsigned 8-bit integer indicating the asset scale that should be used for packets exchanged with the parent</li>
<li><code>Variable-length octet string</code>: An asset code, encoded as a <code>UTF-8</code> string, indicating the settlement asset used between the peers</li>
</ul>
</li>
</ul>
</li>
<li><p>Error</p>
<ul>
<li>The <code>type</code> of the ILP packet is <code>ILP Reject</code> (type id: 14)</li>
<li>The <code>code</code> of the ILP packet is an appropriate error code</li>
<li>The <code>message</code> of the ILP packet is an appropriate human-readable message for debugging purposes</li>
<li>The <code>triggeredBy</code> of the ILP packet is the ILP address of the parent node</li>
<li>The <code>data</code> of the ILP packet is empty (size: 0) or MAY contain further information for debugging the error.</li>
</ul>
</li>
</ul>
<h3 id="asn1-definition">ASN.1 Definition</h3>
<p>The ASN.1 definition of ILP packets is described in <a href="../asn1/InterledgerProtocol.asn">InterledgerProtocol.asn</a> and Dynamic Configuration Protocol data in <a href="../asn1/DynamicConfigurationProtocol.asn">DynamicConfigurationProtocol.asn</a>.</p>
<h3 id="encoding">Encoding</h3>
<p>All ASN.1 types are encoded using <a href="../0030-notes-on-oer-encoding">Octet Encoding Rules</a> as is the norm with all Interledger protocols.</p>

        </div>
      </div>

    </div> <!-- /container -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="col-sm-4 col-xs-12">
              <p>Interledger Team</p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="text-center">See list of <a target="_blank" href="https://www.w3.org/community/interledger/participants">Contributors</a></p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="pull-right">Documentation licensed under <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0.</a></p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68500608-1', 'auto');
      ga('send', 'pageview');

    </script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
