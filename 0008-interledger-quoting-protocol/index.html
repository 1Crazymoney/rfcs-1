<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Payments across payment networks">

    <title>Interledger Quoting Protocol (ILQP) | Interledger</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="/css/monokai-sublime.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700|Droid+Sans+Mono|Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">

    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target="#myScrollspy" data-offset="160" class="spec">

     <!-- navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img class="logo" alt="interledger" src="/assets/ilp_icon.png"/></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="/overview.html">Docs</a></li>
              <li><a href="/community.html">Community</a></li>
              <li><a href="/news.html">News</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a target="_blank" href="https://github.com/interledger">Github</a></li>
            </ul>
          </div>
        </div>
      </nav>

    <!-- docs overview section -->

    <div class="container docs-wrapper">
      <div class="row">
        <div id="sidebarContent">
          <nav class="col-sm-4" id="myScrollspy">
            <ul class="nav-fixed nav nav-sidebar">
              <div class="overview-back"><a href="/overview.html"><i class="fa fa-angle-double-left" aria-hidden="true"></i> Back to Overview</a></div>
              
                <li class="nav-label">
                  <a href="#background-and-terminology">Background and Terminology</a>
                </li>
              
                <li class="nav-label">
                  <a href="#get-quote">Get Quote</a>
                </li>
              
                <li class="nav-label">
                  <a href="#ilqp-packets">ILQP Packets</a>
                </li>
              
                <li>
                  <a href="#ilqpliquidityrequest">IlqpLiquidityRequest</a>
                </li>
              
                <li>
                  <a href="#ilqpliquidityresponse">IlqpLiquidityResponse</a>
                </li>
              
                <li>
                  <a href="#ilqpbysourcerequest">IlqpBySourceRequest</a>
                </li>
              
                <li>
                  <a href="#ilqpbysourceresponse">IlqpBySourceResponse</a>
                </li>
              
                <li>
                  <a href="#ilqpbydestinationrequest">IlqpByDestinationRequest</a>
                </li>
              
                <li>
                  <a href="#ilqpbydestinationresponse">IlqpByDestinationResponse</a>
                </li>
              
                <li class="nav-label">
                  <a href="#next-steps">Next Steps</a>
                </li>
              
                <li class="nav-label">
                  <a href="#appendix-a-asn1-module">Appendix A: ASN.1 Module</a>
                </li>
              
            </ul>
          </nav>
        </div>
        <div class="col-sm-8 markdown-body">
          <h1 id="interledger-quoting-protocol-ilqp">Interledger Quoting Protocol (ILQP)</h1>
<p class="intro">The Interledger Quoting Protocol is a method of getting quote information from a Connector in preparation for arranging transfers across two ledgers. The quote returned by a Connector is non-binding, but provides a basis for choosing which connectors to use.</p>
<p>There are two consumers of the ILQP: sending clients, and other connectors.</p>
<h2 id="background-and-terminology">Background and Terminology</h2>
<p>The quoting protocol returns the price of a <em>hypothetical</em> payment through the connector being queried. However, no part of the ILQP initiates or creates an actual payment. All the information in the ILQP is non-binding and advisory. ILQP only calculates and reports the expected cost of a payment.</p>
<p>Accounts ILQP are identified by their ILP Addresses. For a full explanation of ILP Addresses, see <a href="../0015-ilp-addresses">ILP Addresses</a>.</p>
<p>ILP payments can be as simple as two transfers in different ledgers joined by a single connector. In other cases, they may be longer chains with multiple connectors across three or more ledgers. The response of an ILQP request only defines one link in the chain.</p>
<p><strong>Ledgers:</strong></p>
<ul>
<li>The <strong>source ledger</strong> is where the sender and the connector both have accounts.</li>
<li>The <strong>destination ledger</strong> is where the receiver and the connector both have accounts.</li>
</ul>
<p>The sending and receiving ledger are different ledgers. Otherwise, there should be no reason to use ILQP.</p>
<p><strong>Parties:</strong></p>
<ul>
<li>The <strong>sender</strong> is the party being debited at the start of the overall chain.</li>
<li>The <strong>source</strong> is the party being debited in a single link of the chain.</li>
<li>The <strong>receiver</strong> is the party being credited at the end of the overall chain.</li>
<li>The <strong>destination</strong> is the party being credited in a single link of the chain.</li>
<li>A <strong>connector</strong> facilitates the payment between the source and destination in a single link. In a multiple-hop payment, there are multiple connectors, each of which is the destination of one link and the source of the next.</li>
</ul>
<blockquote>
<p>The following description of ILQP documents the current behaviour of nodes on the live Interledger, the majority of which are running <a href="https://github.com/interledgerjs/ilp-kit">ILP Kit</a> software.</p>
</blockquote>
<h2 id="get-quote">Get Quote</h2>
<p>Quotes are sent through a request/response mechanism exposed by the ledger plugins or ledger layer.</p>
<p>A quote request&apos;s <code>ilp</code> property must be an <code>IlqpLiquidityRequest</code>, <code>IlqpBySourceRequest</code>, or <code>IlqpByDestinationRequest</code>. The response&apos;s <code>ilp</code> property must be an <code>IlqpLiquidityResponse</code>, <code>IlqpBySourceResponse</code>, or <code>IlqpByDestinationResponse</code> respectively. If an error occurs during quoting, <code>ilp</code> will be a <a href="../0003-interledger-protocol/0003-interledger-protocol.md#ilp-error-format"><code>IlpError</code></a> instead.</p>
<h2 id="ilqp-packets">ILQP Packets</h2>
<p>See <a href="https://github.com/interledgerjs/ilp-packet/">interledgerjs/ilp-packet</a> for an example implementation of a packet serializer/deserializer.</p>
<h3 id="ilqpliquidityrequest">IlqpLiquidityRequest</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">destinationAccount</td>
<td style="text-align:left">Address</td>
<td style="text-align:left">Address corresponding to the destination account</td>
</tr>
<tr>
<td style="text-align:left">destinationHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How much time the receiver needs to fulfill the payment (in milliseconds)</td>
</tr>
</tbody>
</table>
<h3 id="ilqpliquidityresponse">IlqpLiquidityResponse</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">liquidity</td>
<td style="text-align:left">LiquidityCurve</td>
<td style="text-align:left">Curve describing the liquidity for the quoted route</td>
</tr>
<tr>
<td style="text-align:left">appliesToPrefix</td>
<td style="text-align:left">Address</td>
<td style="text-align:left">Common prefix of all addresses for which this liquidity curve applies.</td>
</tr>
<tr>
<td style="text-align:left">sourceHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How long the sender should put the money on hold (in milliseconds)</td>
</tr>
<tr>
<td style="text-align:left">expiresAt</td>
<td style="text-align:left">Timestamp</td>
<td style="text-align:left">Maximum time where the connector expects to be able to honor this liquidity curve</td>
</tr>
</tbody>
</table>
<p><code>LiquidityCurve</code> is encoded as a <code>SEQUENCE OF SEQUENCE { x UInt64, y UInt64 }</code>. This is a binary format, so for example the curve <code>[ [0, 0], [10, 265] ]</code> is equivalent to the base64-encoded string <code>&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAkBAAA=&quot;</code>.</p>
<p>See <a href="https://github.com/interledgerjs/ilp-routing/blob/master/src/lib/liquidity-curve.js">interledgerjs/ilp-routing.LiquidityCurve</a> for an example implementation of a LiquidityCurve serializer/deserializer.</p>
<h3 id="ilqpbysourcerequest">IlqpBySourceRequest</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">destinationAccount</td>
<td style="text-align:left">Address</td>
<td style="text-align:left">Address corresponding to the destination account</td>
</tr>
<tr>
<td style="text-align:left">sourceAmount</td>
<td style="text-align:left">UInt64</td>
<td style="text-align:left">Amount the sender needs to send, denominated in the asset of the source ledger</td>
</tr>
<tr>
<td style="text-align:left">destinationHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How much time the receiver needs to fulfill the payment (in milliseconds)</td>
</tr>
</tbody>
</table>
<h3 id="ilqpbysourceresponse">IlqpBySourceResponse</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">destinationAmount</td>
<td style="text-align:left">UInt64</td>
<td style="text-align:left">Amount that will arrive at the receiver</td>
</tr>
<tr>
<td style="text-align:left">sourceHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How long the sender should put money on hold (in milliseconds)</td>
</tr>
</tbody>
</table>
<h3 id="ilqpbydestinationrequest">IlqpByDestinationRequest</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">destinationAccount</td>
<td style="text-align:left">Address</td>
<td style="text-align:left">Address corresponding to the destination account</td>
</tr>
<tr>
<td style="text-align:left">destinationAmount</td>
<td style="text-align:left">UInt64</td>
<td style="text-align:left">Amount that will arrive at the receiver</td>
</tr>
<tr>
<td style="text-align:left">destinationHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How much time the receiver needs to fulfill the payment (in milliseconds)</td>
</tr>
</tbody>
</table>
<h3 id="ilqpbydestinationresponse">IlqpByDestinationResponse</h3>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">sourceAmount</td>
<td style="text-align:left">UInt64</td>
<td style="text-align:left">Amount the sender needs to send, denominated in the asset of the source ledger</td>
</tr>
<tr>
<td style="text-align:left">sourceHoldDuration</td>
<td style="text-align:left">UInt32</td>
<td style="text-align:left">How long the sender should put money on hold (in milliseconds)</td>
</tr>
</tbody>
</table>
<h2 id="next-steps">Next Steps</h2>
<p>After getting a quote using ILQP, the client can display the quote to the user and optionally proceed to <em>Preparing</em> (also called <em>Setting Up</em>) the payment, for example using the <a href="https://github.com/interledger/rfcs/tree/master/0009-simple-payment-setup-protocol">Simple Payment Setup Protocol</a>. That process actually sets money aside and creates the crypto-conditions that will release the money to the desired parties.</p>
<h2 id="appendix-a-asn1-module">Appendix A: ASN.1 Module</h2>
<p>The <a href="../asn1/InterledgerQuotingProtocol.asn">InterledgerQuotingProtocol.asn</a> ASN.1 module describes the binary ILQP messages.</p>

        </div>
      </div>

    </div> <!-- /container -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="col-sm-4 col-xs-12">
              <p>Interledger Team</p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="text-center">See list of <a target="_blank" href="https://www.w3.org/community/interledger/participants">Contributors</a></p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="pull-right">Documentation licensed under <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0.</a></p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68500608-1', 'auto');
      ga('send', 'pageview');

    </script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
