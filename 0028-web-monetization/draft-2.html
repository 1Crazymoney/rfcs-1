<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Payments across payment networks">

    <title>Web Monetization | Interledger</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="/css/monokai-sublime.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700|Droid+Sans+Mono|Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">

    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target="#myScrollspy" data-offset="160" class="spec">

     <!-- navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img class="logo" alt="interledger" src="/assets/ilp_icon.png"/></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="/overview.html">Docs</a></li>
              <li><a href="/community.html">Community</a></li>
              <li><a href="/news.html">News</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a target="_blank" href="https://github.com/interledger">Github</a></li>
            </ul>
          </div>
        </div>
      </nav>

    <!-- docs overview section -->

    <div class="container docs-wrapper">
      <div class="row">
        <div id="sidebarContent">
          <nav class="col-sm-4" id="myScrollspy">
            <ul class="nav-fixed nav nav-sidebar">
              <div class="overview-back"><a href="/overview.html"><i class="fa fa-angle-double-left" aria-hidden="true"></i> Back to Overview</a></div>
                <li class="nav-label">
                  <a href="./draft-2.html">ILP-RFC 0028 Draft 2</a>
                </li>
                <li>
                  <a href="./draft-2.html">Permalink to this Draft</a>
                </li>
                <li>
                  <a href="./">View the Latest Draft of ILP-RFC 0028</a>
                </li>
              
                <li class="nav-label">
                  <a href="#overview">Overview</a>
                </li>
              
                <li>
                  <a href="#terminology">Terminology</a>
                </li>
              
                <li>
                  <a href="#design-goals">Design Goals</a>
                </li>
              
                <li>
                  <a href="#relation-to-other-protocols">Relation to Other Protocols</a>
                </li>
              
                <li class="nav-label">
                  <a href="#flow">Flow</a>
                </li>
              
                <li class="nav-label">
                  <a href="#specification">Specification</a>
                </li>
              
            </ul>
          </nav>
        </div>
        <div class="col-sm-8 markdown-body">
                      <h1 id="web-monetization">Web Monetization</h1>
<p class="intro">Web Monetization is a proposed browser API that uses ILP micropayments to monetize a site. It can be polyfilled by extensions, or can be implemented directly into an ILP-enabled browser.</p>
<h2 id="overview">Overview</h2>
<h3 id="terminology">Terminology</h3>
<ul>
<li>The <strong>webmaster</strong> is the party who is running a site.</li>
<li>The <strong>user</strong> is the party who is accessing the site.</li>
</ul>
<h3 id="design-goals">Design Goals</h3>
<ul>
<li>Should be extremely simple for webmasters to use in their site.</li>
<li>Backend infrastructure should be optional; should be usable on a static site.</li>
<li>Should not require any interaction with the user.</li>
<li>Should give user&apos;s agent a choice about how much to spend, and which sites to support.</li>
<li>Should give advanced webmasters a way to associate payments with their users, in order to unlock premium experiences.</li>
<li>Should pay continuously as the user consumes content.</li>
</ul>
<h3 id="relation-to-other-protocols">Relation to Other Protocols</h3>
<p>The reason this is not using the W3C Web Payments API is that Web Monetization is intended for continuous payments rather than discrete payments. It is also not designed to have any user interaction. The idea is to provide a direct alternative to advertisements, rather than an alternative to existing checkout methods.</p>
<p>With advertisements, the browser decides whether to display the ads and the user decides whether to engage with the ads. With Web Monetization, the browser decides whether to pay the site and, if so, how much to pay.</p>
<p>Web Monetization makes use of <a href="../0026-payment-pointers">Payment Pointers</a> in order to associate a site with an ILP destination, and <a href="../0009-simple-payment-setup-protocol">SPSP</a> in order to set up ILP payments.</p>
<p>The browser or browser extension which provides Web Monetization will likely use the <a href="../0004-ledger-plugin-interface/0004-ledger-plugin-interface">Ledger Plugin Interface</a> in order to trigger payment when a site requests it.</p>
<h2 id="flow">Flow</h2>
<ul>
<li>The user visits a webpage. The page is loaded and the page&apos;s javascript is run.</li>
<li>The site checks whether <code>window.monetize</code> is defined. This function is injected into the page by the browser or browser extension which provides Web Monetization.</li>
<li>If <code>window.monetize</code> is not defined, the webpage may show the user a message asking them to install a Web Monetization extension in order to support this site.</li>
<li>If <code>window.monetize</code> is defined, the webpage calls <code>monetize({ receiver })</code>, where <code>receiver</code> is their payment pointer. This function returns a promise.</li>
<li>The user&apos;s browser or Web Monetization extension decides whether to pay the page.</li>
<li>If the user&apos;s browser decides not to pay, an error is thrown from the <code>monetize</code> promise.</li>
<li>If the user&apos;s browser pays, the <code>monetize</code> promise resolves.</li>
<li>The webpage may run some code in order to thank the user or offer them additional content. This does not guarantee that the site was paid, because it runs client-side. If confirmation of receipt is required, the backend which provides the SPSP server can be queried.</li>
</ul>
<h2 id="specification">Specification</h2>
<h4 id="monetize">monetize</h4>
<p><code>window.monetize({ receiver: string }) -&gt; Promise&lt;void&gt;</code></p>
<p>Request the user&apos;s browser or Web Monetization extension to send money to the specified <code>receiver</code>.
If the browser does not support Web Monetization and there is no Web Monetization extension, this
function will not be defined.</p>
<p>If this call is successful, the user&apos;s browser will begin to send payment to the <code>receiver</code> by resolving
it as a payment pointer and then using SPSP. If <code>receiver</code> does not begin with a <code>$</code> then it will be queried
as an SPSP endpoint as a URL directly.</p>
<p>The amount of money that the user decides to send is up to them. The user SHOULD pay continuously with time,
and SHOULD only pay when the user has the monetized page active.</p>
<p>This function does not guarantee that the user has paid the server. The backend which runs the SPSP receiver
will have to be queried in order to confirm how much has been paid to a specific receiver.</p>
<h5 id="parameters">Parameters</h5>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">opts</td>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left">The options for monetization.</td>
</tr>
<tr>
<td style="text-align:left">opts.receiver</td>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">The <a href="../0009-simple-payment-setup-protocol/draft-4.html">payment pointer</a> or <a href="../0026-payment-pointers/draft-1.html">SPSP endpoint</a> to which ILP payments should be sent.</td>
</tr>
</tbody>
</table>
<h5 id="returns">Returns</h5>
<p><code>Promise&lt;void&gt;</code> - A promise which resolves if the user decides to send money to the page.</p>
<p>Rejects with <code>Error</code> if the user&apos;s browser decides not to send money to this page.</p>

        </div>
      </div>

    </div> <!-- /container -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="col-sm-4 col-xs-12">
              <p>Interledger Team</p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="text-center">See list of <a target="_blank" href="https://www.w3.org/community/interledger/participants">Contributors</a></p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="pull-right">Documentation licensed under <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0.</a></p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68500608-1', 'auto');
      ga('send', 'pageview');

    </script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
