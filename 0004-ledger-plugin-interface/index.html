<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Payments across payment networks">

    <title>Ledger Plugin Interface | Interledger</title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="/css/monokai-sublime.css" rel="stylesheet">
    <link href="/css/custom.css" rel="stylesheet">

    <!-- Google fonts -->
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,600,700|Droid+Sans+Mono|Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>

    <!-- Font awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css">

    <link href="/assets/favicon.ico" rel="icon" type="image/x-icon">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target="#myScrollspy" data-offset="160" class="spec">

     <!-- navbar -->
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img class="logo" alt="interledger" src="/assets/ilp_icon.png"/></a>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li class="active"><a href="/overview.html">Docs</a></li>
              <li><a href="/community.html">Community</a></li>
              <li><a href="/news.html">News</a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
              <li><a target="_blank" href="https://github.com/interledger">Github</a></li>
            </ul>
          </div>
        </div>
      </nav>

    <!-- docs overview section -->

    <div class="container docs-wrapper">
      <div class="row">
        <div id="sidebarContent">
          <nav class="col-sm-4" id="myScrollspy">
            <ul class="nav-fixed nav nav-sidebar">
              <div class="overview-back"><a href="/overview.html"><i class="fa fa-angle-double-left" aria-hidden="true"></i> Back to Overview</a></div>
              
                <li class="nav-label">
                  <a href="#class-ledgerplugin">Class: LedgerPlugin</a>
                </li>
              
                <li>
                  <a href="#instance-management">Instance Management</a>
                </li>
              
                <li>
                  <a href="#connection-management">Connection Management</a>
                </li>
              
                <li>
                  <a href="#ledger-transfers">Ledger Transfers</a>
                </li>
              
                <li>
                  <a href="#event-_transfer">Event: *_transfer</a>
                </li>
              
                <li>
                  <a href="#event-_prepare">Event: *_prepare</a>
                </li>
              
                <li>
                  <a href="#event-_fulfill">Event: *_fulfill</a>
                </li>
              
                <li>
                  <a href="#event-_reject">Event: *_reject</a>
                </li>
              
                <li>
                  <a href="#event-_cancel">Event: *_cancel</a>
                </li>
              
                <li>
                  <a href="#event-incoming_message">Event: incoming_message</a>
                </li>
              
                <li>
                  <a href="#event-info_change">Event: info_change</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-transfer">Class: Transfer</a>
                </li>
              
                <li>
                  <a href="#incomingtransfer">IncomingTransfer</a>
                </li>
              
                <li>
                  <a href="#outgoingtransfer">OutgoingTransfer</a>
                </li>
              
                <li>
                  <a href="#fields-2">Fields</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-message">Class: Message</a>
                </li>
              
                <li>
                  <a href="#incomingmessage">IncomingMessage</a>
                </li>
              
                <li>
                  <a href="#outgoingmessage">OutgoingMessage</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-ledgerinfo">Class: LedgerInfo</a>
                </li>
              
                <li>
                  <a href="#fields-5">Fields</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-pluginoptions">Class: PluginOptions</a>
                </li>
              
                <li>
                  <a href="#fields-6">Fields</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-connectoptions">Class: ConnectOptions</a>
                </li>
              
                <li>
                  <a href="#fields-8">Fields</a>
                </li>
              
                <li class="nav-label">
                  <a href="#class-rejectionmessage">Class: RejectionMessage</a>
                </li>
              
            </ul>
          </nav>
        </div>
        <div class="col-sm-8 markdown-body">
          <h1 id="ledger-plugin-interface">Ledger Plugin Interface</h1>
<p class="intro">The Interledger Protocol is a protocol suite for connecting blockchains and other ledgers.</p>
<p>This spec defines a ledger abstraction interface for Interledger clients and connectors to communicate and route payments across different ledger protocols.</p>
<p>To send ILP payments through a new ledger, one must implement a ledger plugin that exposes the interface defined below. This can be used with the ILP Client and Connector and should work out of the box.</p>
<p>This spec depends on the <a href="../0003-interledger-protocol/">ILP spec</a>.</p>
<h2 id="class-ledgerplugin">Class: LedgerPlugin</h2>
<p><code>class LedgerPlugin</code></p>
<h6 id="methods">Methods</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left"></th>
<th style="text-align:left">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>new</code></td>
<td style="text-align:left"><a href="#new-ledgerplugin"><strong>LedgerPlugin</strong></a> ( opts )</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#connect"><strong>connect</strong></a> ( options ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#disconnect"><strong>disconnect</strong></a> ( ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#isconnected"><strong>isConnected</strong></a> ( ) <code>&#x21D2; Boolean</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#getinfo"><strong>getInfo</strong></a> ( ) <code>&#x21D2; <a href="#class-ledgerinfo">LedgerInfo</a></code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#getaccount"><strong>getAccount</strong></a> ( ) <code>&#x21D2; String</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#getbalance"><strong>getBalance</strong></a> ( ) <code>&#x21D2; Promise.&lt;String&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#getfulfillment"><strong>getFulfillment</strong></a> ( transferId ) <code>&#x21D2; Promise.&lt;String&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#sendTransfer"><strong>sendTransfer</strong></a> ( transfer ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#sendMessage"><strong>sendMessage</strong></a> ( message ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#fulfillcondition"><strong>fulfillCondition</strong></a> ( transferId, fulfillment ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td style="text-align:left"><a href="#rejectincomingtransfer"><strong>rejectIncomingTransfer</strong></a> ( transferId, reason ) <code>&#x21D2; Promise.&lt;null&gt;</code></td>
</tr>
</tbody>
</table>
<h6 id="events">Events</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Handler</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="#event-connect-"><strong>connect</strong></a></td>
<td style="text-align:left"><code>( ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-disconnect-"><strong>disconnect</strong></a></td>
<td style="text-align:left"><code>( ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-error-"><strong>error</strong></a></td>
<td style="text-align:left"><code>( ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_transfer-"><strong>incoming_transfer</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#incomingtransfer">IncomingTransfer</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_prepare-"><strong>incoming_prepare</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#incomingtransfer">IncomingTransfer</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_fulfill-"><strong>incoming_fulfill</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#incomingtransfer">IncomingTransfer</a>, fulfillment:String ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_reject-"><strong>incoming_reject</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#incomingtransfer">IncomingTransfer</a>, rejectionReason:<a href="#class-rejectionmessage">RejectionMessage</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_cancel-"><strong>incoming_cancel</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#incomingtransfer">IncomingTransfer</a>, cancellationReason:<a href="#class-rejectionmessage">RejectionMessage</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_message-"><strong>incoming_message</strong></a></td>
<td style="text-align:left"><code>( message:<a href="#incomingmessage">IncomingMessage</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_transfer-"><strong>outgoing_transfer</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#outgoingtransfer">outgoingTransfer</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_prepare-"><strong>outgoing_prepare</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#outgoingtransfer">outgoingTransfer</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_fulfill-"><strong>outgoing_fulfill</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#outgoingtransfer">outgoingTransfer</a>, fulfillment:String ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_reject-"><strong>outgoing_reject</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#outgoingtransfer">outgoingTransfer</a>, rejectionReason:<a href="#class-rejectionmessage">RejectionMessage</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-*_cancel-"><strong>outgoing_cancel</strong></a></td>
<td style="text-align:left"><code>( transfer:<a href="#outgoingtransfer">outgoingTransfer</a>, cancellationReason:<a href="#class-rejectionmessage">RejectionMessage</a> ) &#x21D2;</code></td>
</tr>
<tr>
<td style="text-align:left"><a href="#event-info_change-"><strong>info_change</strong></a></td>
<td style="text-align:left"><code>( info:<a href="#class-ledgerinfo">LedgerInfo</a> ) &#x21D2;</code></td>
</tr>
</tbody>
</table>
<h6 id="errors">Errors</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href=""><strong>InvalidFieldsError</strong></a></td>
<td style="text-align:left">Arguments or configuration were invalidated client-side</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>UnreachableError</strong></a></td>
<td style="text-align:left">An error occured due to connection failure</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>TransferNotFoundError</strong></a></td>
<td style="text-align:left">A requested transfer does not exist and cannot be fetched</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>MissingFulfillmentError</strong></a></td>
<td style="text-align:left">A transfer has not yet been fulfilled, so the fulfillment cannot be fetched</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>DuplicateIdError</strong></a></td>
<td style="text-align:left">A transfer with the same ID and different fields has been sent</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>AlreadyRolledBackError</strong></a></td>
<td style="text-align:left">A requested transfer has already been timed out or rejected and cannot be modified</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>AlreadyFulfilledError</strong></a></td>
<td style="text-align:left">A requested transfer has already been fulfilled and cannot be modified</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>TransferNotConditionalError</strong></a></td>
<td style="text-align:left">A requested transfer is not conditional and cannot be rejected/fulfilled/etc.</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>NotAcceptedError</strong></a></td>
<td style="text-align:left">An operation has been rejected due to ledger-side logic</td>
</tr>
<tr>
<td style="text-align:left"><a href=""><strong>NoSubscriptionsError</strong></a></td>
<td style="text-align:left">A transfer or message cannot be delivered because there are no active websockets</td>
</tr>
</tbody>
</table>
<h3 id="instance-management">Instance Management</h3>
<h4 id="new-ledgerplugin">new LedgerPlugin</h4>
<p><code>new LedgerPlugin( <strong>opts</strong> : <a href="#class-pluginoptions">PluginOptions</a> )</code></p>
<p>Create a new instance of the plugin. Each instance typically corresponds to a different ledger. However, some plugins MAY deviate from a strict one-to-one relationship and MAY use one instance for multiple (similar) ledgers or multiple instances to talk to the same ledger.</p>
<p>Throws <code>InvalidFieldsError</code> if the constructor is given incorrect arguments.</p>
<h6 id="parameters-1">Parameters</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">opts</td>
<td style="text-align:left"><code><a href="#class-pluginoptions">PluginOptions</a></code></td>
<td style="text-align:left">Object containing ledger-related settings. May contain plugin-specific fields.</td>
</tr>
</tbody>
</table>
<h6 id="example-1">Example</h6>
<pre><code class="lang-js">const ledgerPlugin = new LedgerPlugin({

  // auth parameters are defined by the plugin

  _store: {
    // persistence may be required for internal use by some ledger plugins
    // (e.g. when the ledger has reduced memo capability and we can only put an ID in the memo)
    // Store a value under a key
    put: (key, value) =&gt; {
      // Returns Promise.&lt;null&gt;
    },
    // Fetch a value by key
    get: (key) =&gt; {
      // Returns Promise.&lt;Object&gt;
    },
    // Delete a value by key
    del: (key) =&gt; {
      // Returns Promise.&lt;null&gt;
    }
  }
})
</code></pre>
<p>For a detailed description of these properties, please see <a href="#class-pluginoptions"><code>PluginOptions</code></a>.</p>
<h3 id="connection-management">Connection Management</h3>
<h4 id="connect">connect</h4>
<p><code>ledgerPlugin.connect( options:<a href="#class-connectoptions">ConnectOptions</a> &#x21D2; Promise.&lt;null&gt;</code></p>
<p><code>options</code> is optional.</p>
<p>Initiate ledger event subscriptions. Once <code>connect</code> is called the ledger plugin MUST attempt to subscribe to and report ledger events. Once the connection is established, the ledger plugin should emit the <a href="#event-connect-"><code>connect</code></a> event. If the connection is lost, the ledger plugin SHOULD emit the <a href="#event-disconnect-"><code>disconnect</code></a> event. The plugin should ensure that the information returned by <code>getInfo</code> and <code>getAccount</code> is available and cached before emitting the <a href="#event-connect-"><code>connect</code></a> event.</p>
<p>Rejects with <code>InvalidFieldsError</code> if credentials are missing, and <code>NotAcceptedError</code> if credentials are rejected.
Rejects with <code>TypeError</code> if <code>options.timeout</code> is passed but is not a <code>Number</code>.</p>
<h4 id="disconnect">disconnect</h4>
<p><code>ledgerPlugin.disconnect() &#x21D2; Promise.&lt;null&gt;</code></p>
<p>Unsubscribe from ledger events.</p>
<h4 id="isconnected">isConnected</h4>
<p><code>ledgerPlugin.isConnected() &#x21D2; Boolean</code></p>
<p>Query whether the plugin is currently connected.</p>
<h4 id="getinfo">getInfo</h4>
<p><code>ledgerPlugin.getInfo() &#x21D2; <a href="#class-ledgerinfo">LedgerInfo</a></code></p>
<p>Retrieve some metadata about the ledger. Plugin must be connected, otherwise the function should throw.</p>
<h6 id="example-return-value-1">Example Return Value</h6>
<pre><code class="lang-json">{
  &quot;prefix&quot;: &quot;us.fed.some-bank.&quot;,
  &quot;precision&quot;: 10,
  &quot;scale&quot;: 4,
  &quot;currencyCode&quot;: &quot;USD&quot;,
  &quot;currencySymbol&quot;: &quot;$&quot;,
  &quot;connectors&quot;: [ &quot;us.fed.some-bank.chloe&quot; ]
}
</code></pre>
<p>For a detailed description of these properties, please see <a href="#class-ledgerinfo"><code>LedgerInfo</code></a>.</p>
<h4 id="getaccount">getAccount</h4>
<p><code>ledgerPlugin.getAccount() &#x21D2; String</code></p>
<p>Get the ledger plugin&apos;s ILP address. This is given to senders to receive transfers to this account. Plugin must be connected, otherwise the function should throw.</p>
<p>The mapping from the ILP address to the local ledger address is dependent on the ledger / ledger plugin. An ILP address could be the <code>&lt;ledger prefix&gt;.&lt;account name or number&gt;</code>, or a token could be used in place of the actual account name or number.</p>
<h6 id="example-return-value-2">Example Return Value</h6>
<p><code>us.fed.some-bank.my-account</code></p>
<h4 id="getbalance">getBalance</h4>
<p><code>ledgerPlugin.getBalance() &#x21D2; Promise.&lt;String&gt;</code></p>
<p>Return a decimal string representing the current balance. Plugin must be connected, otherwise the promise should reject.</p>
<h4 id="getfulfillment">getFulfillment</h4>
<p><code>ledgerPlugin.getFulfillment( transferId ) &#x21D2; Promise.&lt;String&gt;</code></p>
<p>Return the fulfillment of a transfer if it has already been executed.</p>
<p>Rejects with <code>MissingFulfillmentError</code> if the transfer exists but is not yet
fulfilled. Rejects with <code>TransferNotFoundError</code> if no conditional transfer is found
with the given ID. Rejects with <code>AlreadyRolledBackError</code> if the transfer has been rolled back
and will not be fulfilled. Rejects with <code>TransferNotConditionalError</code> if transfer is not
conditional.</p>
<h4 id="event-connect">Event: <code>connect</code></h4>
<p><code>ledgerPlugin.on(&apos;connect&apos;, () &#x21D2; )</code></p>
<p>Emitted whenever a connection is successfully established.</p>
<h4 id="event-disconnect">Event: <code>disconnect</code></h4>
<p><code>ledgerPlugin.on(&apos;disconnect&apos;, () &#x21D2; )</code></p>
<p>Emitted when the connection has been terminated or lost.</p>
<h4 id="event-error">Event: <code>error</code></h4>
<p><code>ledgerPlugin.on(&apos;error&apos;, ( <strong>err</strong>:Error ) &#x21D2; )</code></p>
<p>General event for fatal exceptions. Emitted when the plugin experienced an unexpected unrecoverable condition. Once triggered, this instance of the plugin MUST NOT be used anymore.</p>
<h3 id="ledger-transfers">Ledger Transfers</h3>
<p>Note that all transfers will have <code>transferId</code>&apos;s to allow the plugin user to correlate actions related to a single transfer. The <code>transferId</code> will be the same as the ID used by the underlying ledger wherever possible or applicable. If the ledger does not have transfer IDs, the plugin may generate one and use the <code>store</code> passed in to the constructor to persist them.</p>
<h4 id="sendtransfer">sendTransfer</h4>
<p><code>ledgerPlugin.sendTransfer( <strong>transfer</strong>:<a href="#outgoingtransfer">OutgoingTransfer</a> ) &#x21D2; Promise.&lt;null&gt;</code></p>
<p>Plugin must be connected, otherwise the promise should reject. Initiates a ledger-local transfer. A transfer can
contain money and/or information. If there is a problem with the structure or
validity of the transfer, then <code>sendTransfer</code> should reject with an error.
If the transfer is accepted by the ledger, however, then
further errors will be in the form of <code>&quot;reject&quot;</code> events.</p>
<p>All plugins MUST implement zero-amount transfers, but some ledger plugins MAY
implement zero-amount transfers differently than other transfers.</p>
<h6 id="parameters-2">Parameters</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">transfer</td>
<td style="text-align:left"><code><a href="#outgoingtransfer">OutgoingTransfer</a></code></td>
<td style="text-align:left">Properties of the transfer to be created</td>
</tr>
</tbody>
</table>
<p>When sending transfers, the <a href="#id">id</a>, <a href="#amount">amount</a> and <a href="#to">to</a> fields
are required.</p>
<h6 id="returns-1">Returns</h6>
<p><strong><code>Promise.&lt;null&gt;</code></strong> A promise which resolves when the transfer has been submitted (but not necessarily accepted.)</p>
<p>Rejects with <code>InvalidFieldsError</code> if required fields are missing from the transfer or malformed. Rejects with <code>DuplicateIdError</code> if a transfer with
the given ID and different already exists. Rejects with <code>NotAcceptedError</code> if the transfer is rejected by the ledger due to insufficient balance or
a nonexistant destination account.</p>
<h6 id="example-2">Example</h6>
<pre><code class="lang-js">p.sendTransfer({
  id: &apos;d86b0299-e2fa-4713-833a-96a6a75271b8&apos;,
  to: &apos;example.ledger.connector&apos;,
  amount: &apos;10&apos;,
  data: new Buffer(&apos;...&apos;, &apos;base64&apos;),
  noteToSelf: {},
  executionCondition: &apos;47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU&apos;,
  expiresAt: &apos;2016-05-18T12:00:00.000Z&apos;
})
</code></pre>
<p>For a detailed description of these properties, please see <a href="#outgoingtransfer"><code>OutgoingTransfer</code></a>.</p>
<h4 id="sendmessage">sendMessage</h4>
<p><code>ledgerPlugin.sendMessage( <strong>message</strong>:<a href="#outgoingmessage">OutgoingMessage</a> ) &#x21D2; Promise.&lt;null&gt;</code></p>
<p>Plugin must be connected, otherwise the promise should reject. Send a ledger-local message.
If there is a problem with the structure or validity of the message, then <code>sendMessage</code> should reject with an error.</p>
<p>Messaging is used by connectors for <a href="../0008-interledger-quoting-protocol/">quoting</a> and broadcasting routes.</p>
<h6 id="parameters-3">Parameters</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Name</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">message</td>
<td style="text-align:left"><code><a href="#outgoingmessage">OutgoingMessage</a></code></td>
<td style="text-align:left">Properties of the message to be created</td>
</tr>
</tbody>
</table>
<p>When sending messages, the <a href="#to">to</a> and <a href="#data">data</a> fields are required.</p>
<h6 id="returns-2">Returns</h6>
<p><strong><code>Promise.&lt;null&gt;</code></strong> A promise which resolves when the message has been submitted (but not necessarily delivered). To ensure delivery, you must build a mechanism for that on top.</p>
<p>Rejects with <code>InvalidFieldsError</code> if required fields are missing from the message or malformed.
Rejects with <code>NotAcceptedError</code> if the message is rejected by the ledger.
Rejects with <code>NoSubscriptionsError</code> if the message cannot be delivered because there is nobody listening to messages addressed to the given account.</p>
<h6 id="example-3">Example</h6>
<pre><code class="lang-js">p.sendMessage({
  to: &apos;example.ledger.connector&apos;,
  data: { foo: &apos;bar&apos; }
})
</code></pre>
<p>For a detailed description of these properties, please see <a href="#outgoingmessage"><code>OutgoingMessage</code></a>.</p>
<h4 id="fulfillcondition">fulfillCondition</h4>
<p><code>ledgerPlugin.fulfillCondition( <strong>transferId</strong>:String, <strong>fulfillment</strong>:String ) &#x21D2; Promise.&lt;null&gt;</code></p>
<p>Submit a fulfillment to a ledger. Plugin must be connected, otherwise the promise should reject.</p>
<p>The <code>fulfillment</code> is an arbitrary 32-byte buffer and is provided as a base64url-encoded string.</p>
<p>Rejects with <code>InvalidFieldsError</code> if the fulfillment is malformed. Rejects with <code>TransferNotFoundError</code> if the fulfillment
if no conditional transfer with the given ID exists. Rejects with <code>AlreadyRolledBackError</code> if the transfer has already been
rolled back. Rejects with <code>NotAcceptedError</code> if the fulfillment is formatted correctly, but does not match the condition
of the specified transfer. Rejects with <code>TransferNotConditionalError</code> if transfer is not conditional.</p>
<h4 id="rejectincomingtransfer">rejectIncomingTransfer</h4>
<p><code>ledgerPlugin.rejectIncomingTransfer( <strong>transferId</strong>:String, <strong>reason</strong>:<a href="#class-rejectionmessage">RejectionMessage</a> ) &#x21D2; Promise.&lt;null&gt;</code></p>
<p>Reject an incoming transfer that is held pending the fulfillment of its <code>executionCondition</code> before the <code>expiresAt</code> time. <code>reason</code> MAY be supplied to provide details on why the transfer was rejected.</p>
<p>Rejects with <code>TransferNotFoundError</code> if there is no conditional transfer with the
given ID. Rejects with <code>AlreadyFulfilledError</code> if the specified transfer has already been
fulfilled. Rejects with <code>NotAcceptedError</code> if you are not authorized
to reject the transfer (e.g. if you are the sender). Rejects with <code>TransferNotConditionalError</code>
if transfer is not conditional.</p>
<p>This MAY be used by receivers or connectors to reject incoming funds if they will not fulfill the condition or are unable to forward the payment. Previous hops in an Interledger transfer would have their money returned before the expiry and the sender or previous connectors MAY retry and reroute the transfer through an alternate path.</p>
<h3 id="event-_transfer">Event: <code>*_transfer</code></h3>
<p><code style="">ledgerPlugin.on(&apos;incoming_transfer&apos;,
  (
    <strong>transfer</strong>:<a href="#class-transfer">Transfer</a>,
  ) &#x21D2;
)</code></p>
<p>Emitted after an outgoing/incoming transfer which does not have a condition is
executed on the ledger.</p>
<p>This indicates that the funds have already been
transferred. In order to prevent unexpected incoming funds, a ledger MAY allow users to forbid incoming transfers without
conditions.</p>
<p>If the event is <code>outgoing_transfer</code>, then it means you sent the transfer. <code>incoming_transfer</code> means somebody sent funds
to you.</p>
<h3 id="event-_prepare">Event: <code>*_prepare</code></h3>
<p><code style="">ledgerPlugin.on(&apos;incoming_prepare&apos;,
  (
    <strong>transfer</strong>:<a href="#class-transfer">Transfer</a>,
  ) &#x21D2;
)</code></p>
<p>Emitted when an outgoing/incoming transfer containing a condition is prepared.</p>
<p>Note that the <code>*_prepare</code> event <strong>DOES NOT</strong> indicate that money has been transferred. The final status will only be known when either the <a href="#event-*_fulfill-">*_fulfill</a> or <a href="#event-*_cancel-">*_cancel</a> events are emitted.</p>
<p>The ledger plugin MUST authenticate the source for all incoming transfers, whether they include money or not.</p>
<p>If the event is <code>outgoing_prepare</code>, then it means you prepared the transfer. <code>incoming_prepare</code> means someone prepared
a transfer to you.</p>
<h3 id="event-_fulfill">Event: <code>*_fulfill</code></h3>
<p><code style="">ledgerPlugin.on(&apos;outgoing_fulfill&apos;,
  (
    <strong>transfer</strong>:<a href="#class-transfer">Transfer</a>,
    <strong>fulfillment</strong>:String
  ) &#x21D2;
)</code></p>
<p>Emitted when an outgoing/incoming transfer with a condition is fulfilled. The <code>fulfillment</code> is provided as a base64url-encoded string.</p>
<p>This indicates that funds have been transferred. In order to prevent unexpected incoming funds, a ledger MAY forbid
accounts from fulfilling a transfer who are not the transfer&apos;s receiver.</p>
<p>If the event is <code>incoming_fulfill</code>, then it means you fulfilled the transfer. <code>outgoing_fulfill</code> means the receiver
of your outgoing transfer has fulfilled the condition.</p>
<h3 id="event-_reject">Event: <code>*_reject</code></h3>
<p><code style="">ledgerPlugin.on(&apos;outgoing_reject&apos;,
  (
    <strong>transfer</strong>:<a href="#class-transfer">Transfer</a>,
    <strong>reason</strong>:<a href="#class-rejectionmessage">RejectionMessage</a>
  ) &#x21D2;
)</code></p>
<p>Emitted when an outgoing/incoming transfer is rejected by the receiver.</p>
<p>This indicates that a transfer has been manually cancelled before the timeout
by the receiver. A message can be passed along with the rejection.</p>
<p>If the event is <code>incoming_reject</code>, then it means you rejected the transfer. <code>outgoing_reject</code> means that
the receiver of your outgoing transfer has rejected it.</p>
<h3 id="event-_cancel">Event: <code>*_cancel</code></h3>
<p><code style="">ledgerPlugin.on(&apos;outgoing_cancel&apos;,
  (
    <strong>transfer</strong>:<a href="#class-transfer">Transfer</a>,
    <strong>reason</strong>:<a href="#class-rejectionmessage">RejectionMessage</a>
  ) &#x21D2;
)</code></p>
<p>Emitted when an outgoing/incoming transfer is rejected by the ledger.</p>
<p>This will happen on a timeout, triggered by the ledger and not by the receiver.</p>
<p>If the event is <code>incoming_cancel</code>, an incoming transfer was timed out by the ledger. <code>outgoing_cancel</code>
means that a transfer you created has timed out.</p>
<h3 id="event-incoming_message">Event: <code>incoming_message</code></h3>
<p><code style="">ledgerPlugin.on(&apos;incoming_message&apos;,
  (
    <strong>message</strong>:<a href="#incomingmessage">IncomingMessage</a>,
  ) &#x21D2;
)</code></p>
<p>Emitted when an incoming message arrives from the ledger.</p>
<h3 id="event-info_change">Event: <code>info_change</code></h3>
<p><code style="">ledgerPlugin.on(&apos;info_change&apos;,
  (
    <strong>info</strong>:<a href="#class-ledgerinfo">LedgerInfo</a>
  ) &#x21D2;
)</code></p>
<p>Emitted any time the plugin&apos;s <code>LedgerInfo</code> cache changes.</p>
<h2 id="class-transfer">Class: Transfer</h2>
<p><code>class Transfer</code></p>
<p>The <code>Transfer</code> class is used to describe local ledger transfers. Fields can be
left undefined (but not any other false-y value) if unused.</p>
<h6 id="fields-1">Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#id">id</a></td>
<td style="text-align:left">UUID used as an external identifier</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#account">account</a></td>
<td style="text-align:left">ILP Address of the source or destination account (deprecated)</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#from">from</a></td>
<td style="text-align:left">ILP Address of the source account</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#to">to</a></td>
<td style="text-align:left">ILP Address of the destination account</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#ledger">ledger</a></td>
<td style="text-align:left">ILP Address prefix of the ledger</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#amount">amount</a></td>
<td style="text-align:left">Decimal transfer amount</td>
</tr>
<tr>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left"><a href="#data">data</a></td>
<td style="text-align:left">Data packet or memo to be sent with the transfer, starts with an ILP header</td>
</tr>
<tr>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left"><a href="#notetoself">noteToSelf</a></td>
<td style="text-align:left">Host-provided memo that should be stored with the transfer</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#executioncondition">executionCondition</a></td>
<td style="text-align:left">Cryptographic hold condition</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#expiresat">expiresAt</a></td>
<td style="text-align:left">Expiry time of the cryptographic hold</td>
</tr>
<tr>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left"><a href="#custom">custom</a></td>
<td style="text-align:left">Object containing ledger plugin specific options</td>
</tr>
</tbody>
</table>
<h3 id="incomingtransfer">IncomingTransfer</h3>
<p><code>class IncomingTransfer extends <a href="#class-transfer">Transfer</a></code></p>
<p><code>IncomingTransfer</code> objects describe transfers which are <strong>received</strong> by the ledger plugin. The <code>account</code> field refers to the local source account that the transfer originated from.</p>
<p>See <a href="#class-transfer"><code>Transfer</code></a> for more information.</p>
<h3 id="outgoingtransfer">OutgoingTransfer</h3>
<p><code>class OutgoingTransfer extends <a href="#class-transfer">Transfer</a></code></p>
<p><code>OutgoingTransfer</code> objects describe transfers which have been <strong>sent</strong> by the ledger plugin. The <code>account</code> field refers to the local destination account on the underlying ledger.</p>
<p>See <a href="#class-transfer"><code>Transfer</code></a> for more information.</p>
<h3 id="fields-2">Fields</h3>
<h4 id="id-1">id</h4>
<p><code><strong>id</strong>:String</code></p>
<p>External unique identifier used by the host.</p>
<p>For <a href="#outgoingtransfer"><code>OutgoingTransfer</code></a>s, the ID is chosen by the host. The ledger plugin MAY use a different identifier internally, but MUST fail if the external ID has already been used. In the case of a connector, the ID will be deterministically chosen from the hash of the ledger and transfer IDs of the inbound transfer that triggered this outbound transfer.</p>
<p>For <a href="#incomingtransfer"><code>IncomingTransfer</code></a>s, the ID is chosen by the ledger plugin. The ledger plugin MAY use any type of UUID, but MUST ensure that the same transfer is always referred to by the same ID and that IDs are unique per ledger.</p>
<p>Ledger plugins that support scalability (e.g. running multiple instances of a connector using the same settings) MUST ensure that external transfer IDs are unique <strong>globally</strong>, i.e. across all machines and instances. Otherwise a connector could accidentally process two outgoing payments for one incoming payment.</p>
<h4 id="account-1">account</h4>
<p><code><strong>account</strong>:String</code></p>
<p>The ILP Address of a local account.</p>
<p><strong>Deprecated:</strong> Use <a href="#from"><code>from</code></a>/<a href="#to"><code>to</code></a> instead.</p>
<h4 id="from-1">from</h4>
<p><code><strong>from</strong>:String</code></p>
<p>The ILP Address of the source or debit account.</p>
<h4 id="to-1">to</h4>
<p><code><strong>to</strong>:String</code></p>
<p>The ILP Address of the destination or credit account.</p>
<h4 id="ledger-1">ledger</h4>
<p> <code><strong>ledger</strong>:String</code></p>
<p>ILP Address prefix of the ledger that this transfer is going through on.</p>
<h4 id="amount">amount</h4>
<p><code><strong>amount</strong>:String</code></p>
<p>A decimal amount, represented as a string. MUST be positive. The supported precision is defined by each ledger plugin and can be queried by the host via <a href="#getinfo"><code>getInfo</code></a>. The ledger plugin MUST reject with an <code>InsufficientPrecisionError</code> if the given amount exceeds the supported level of precision.</p>
<h4 id="data-1">data</h4>
<p><code><strong>data</strong>:Object</code></p>
<p>An arbitrary plain JavaScript object containing the data to be sent. The object MUST be serializable to JSON. Ledger plugins SHOULD treat this data as opaque. Typically, it will contain an <a href="../0003-interledger-protocol/">ILP header</a>.</p>
<p>If the <code>data</code> is too large, the ledger plugin MUST reject with a <code>MaximumDataSizeExceededError</code>. If the <code>data</code> is too large only because the <code>amount</code> is insufficient, the ledger plugin MUST reject with an <code>InsufficientAmountError</code>.</p>
<h4 id="notetoself">noteToSelf</h4>
<p><code><strong>noteToSelf</strong>:Object</code></p>
<p>An arbitrary plain JavaScript object containing details the host needs to persist with the transfer in order to be able to react to transfer events like condition fulfillment later.</p>
<p>Ledger plugins MAY attach the <code>noteToSelf</code> to the transfer and let the ledger store it. Otherwise it MAY use the <a href="#store"><code>store</code></a> in order to persist this field. Regardless of the implementation, the ledger plugin MUST ensure that all instances of the transfer carry the same <code>noteToSelf</code>, even across different machines.</p>
<p>Ledger plugins MUST ensure that the data in the <code>noteToSelf</code> either isn&apos;t shared with any untrusted party or encrypted before it is shared.</p>
<h4 id="executioncondition">executionCondition</h4>
<p><code><strong>executionCondition</strong>:String</code></p>
<p>A cryptographic challenge used for implementing holds. The underlying ledger MUST hold the transfer until the condition has been fulfilled or the <code>expiresAt</code> time has been reached.</p>
<p>Conditions are the base64url-encoded SHA-256 hash of a random, pseudo-random or deterministically generated 32-byte preimage called the fulfillment.</p>
<p>Ledger plugins that do not support holds MUST reject with an <code>HoldsNotSupportedError</code> if this parameter is provided.</p>
<h4 id="expiresat">expiresAt</h4>
<p><code><strong>expiresAt</strong>:String</code></p>
<p>An ISO 8601 timestamp representing the expiry date for the transfer.</p>
<p>Ledger plugins that do not support holds or do not support expiries MUST reject with an <code>ExpiryNotSupportedError</code> if this parameter is provided.</p>
<h4 id="custom">custom</h4>
<p><code><strong>custom</strong>:Object</code></p>
<p>Ledger plugins MAY use this object to accept and/or set additional fields for other features they support. The object MUST be serializable, i.e. only plain JSON types are allowed anywhere in the object or sub-objects.</p>
<h6 id="example-4">Example</h6>
<pre><code class="lang-js">{
  id: &apos;94adc29e-26cd-471b-987e-8d41e8773864&apos;,
  account: &apos;example.ledger.bob&apos;,
  from: &apos;example.ledger.bob&apos;,
  to: &apos;example.ledger.alice&apos;,
  ledger: &apos;example.ledger.&apos;,
  amount: &apos;100&apos;,
  data: /* ... */,
  noteToSelf: /* ... */,
  custom: {
    alternateAccount: &apos;bob-savings&apos;,
    executionPriority: 9
  }
}
</code></pre>
<h2 id="class-message">Class: Message</h2>
<p><code>class Message</code></p>
<p>The <code>Message</code> class is used to describe local ledger message. All fields are required.</p>
<h6 id="fields-3">Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">account</td>
<td style="text-align:left">ILP Address of the source or destination account (deprecated)</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">from</td>
<td style="text-align:left">ILP Address of the source account</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">to</td>
<td style="text-align:left">ILP Address of the destination account</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left">ledger</td>
<td style="text-align:left">ILP Address prefix of the ledger</td>
</tr>
<tr>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left">data</td>
<td style="text-align:left">Data packet to be sent with the message</td>
</tr>
</tbody>
</table>
<h3 id="incomingmessage">IncomingMessage</h3>
<p><code>class IncomingMessage extends <a href="#class-message">Message</a></code></p>
<p><code>IncomingMessage</code> objects describe messages which are <strong>received</strong> by the ledger plugin. The <code>account</code> field refers to the local source account that the message originated from.</p>
<p>See <a href="#class-message"><code>Message</code></a> for more information.</p>
<h3 id="outgoingmessage">OutgoingMessage</h3>
<p><code>class OutgoingMessage extends <a href="#class-message">Message</a></code></p>
<p><code>OutgoingMessage</code> objects describe messages which have been <strong>sent</strong> by the ledger plugin. The <code>account</code> field refers to the local destination account on the underlying ledger.</p>
<p>See <a href="#class-message"><code>Message</code></a> for more information.</p>
<h4 id="account-2">account</h4>
<p><code><strong>account</strong>:String</code></p>
<p>The ILP Address of a local account.</p>
<p><strong>Deprecated:</strong> Use <a href="#from"><code>from</code></a>/<a href="#to"><code>to</code></a> instead.</p>
<h4 id="from-2">from</h4>
<p><code><strong>from</strong>:String</code></p>
<p>The ILP Address of the source or debit account.</p>
<h4 id="to-2">to</h4>
<p><code><strong>to</strong>:String</code></p>
<p>The ILP Address of the destination or credit account.</p>
<h4 id="ledger-2">ledger</h4>
<p><code><strong>to</strong>:String</code></p>
<p>The ILP Prefix of the ledger being used to transfer the message.</p>
<h4 id="data-2">data</h4>
<p><code><strong>data</strong>:Object</code></p>
<p>An arbitrary plain JavaScript object containing the data to be sent. The object MUST be serializable to JSON. Ledger plugins SHOULD treat this data as opaque.</p>
<p>If the <code>data</code> is too large, the ledger plugin MUST reject with a <code>MaximumDataSizeExceededError</code>.</p>
<h6 id="example-5">Example</h6>
<pre><code class="lang-js">{
  account: &apos;example.ledger.bob&apos;,
  from: &apos;example.ledger.alice&apos;,
  to: &apos;example.ledger.bob&apos;,
  ledger: &apos;example.ledger.&apos;,
  data: { /* ... */ }
}
</code></pre>
<h2 id="class-ledgerinfo">Class: LedgerInfo</h2>
<p><code>class LedgerInfo</code></p>
<p>Metadata describing the ledger. This data is returned by the <a href="#getinfo"><code>getInfo</code></a> method.</p>
<h6 id="fields-4">Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#prefix">prefix</a></td>
<td style="text-align:left">The plugin&apos;s ILP address prefix</td>
</tr>
<tr>
<td style="text-align:left"><code>Number</code></td>
<td style="text-align:left"><a href="#precision">precision</a></td>
<td style="text-align:left">Total number of digits allowed</td>
</tr>
<tr>
<td style="text-align:left"><code>Number</code></td>
<td style="text-align:left"><a href="#scale">scale</a></td>
<td style="text-align:left">Digits allowed after decimal</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#currencycode">currencyCode</a></td>
<td style="text-align:left">ISO three-letter currency code</td>
</tr>
<tr>
<td style="text-align:left"><code>String</code></td>
<td style="text-align:left"><a href="#currencysymbol">currencySymbol</a></td>
<td style="text-align:left">UTF8 currency symbol</td>
</tr>
<tr>
<td style="text-align:left"><code>String[]</code></td>
<td style="text-align:left"><a href="#connectors">connectors</a></td>
<td style="text-align:left">ILP addresses of recommended connectors</td>
</tr>
</tbody>
</table>
<h3 id="fields-5">Fields</h3>
<h4 id="prefix">prefix</h4>
<p><code><strong>prefix</strong>:String</code></p>
<p>The ledger plugin&apos;s ILP address prefix. This is used to determine whether a given ILP address is local to this ledger plugin and thus can be reached using this plugin&apos;s <code>sendTransfer</code> method.</p>
<p>The prefix may be configured, automatically detected, or hard-coded, depending on the ledger. For example, a Bitcoin ledger plugin may have the address hard-coded, while a <a href="https://github.com/interledger/five-bells-ledger"><code>five-bells-ledger</code></a> would use an API call to get the prefix.</p>
<h4 id="precision">precision</h4>
<p><code><strong>precision</strong>:Number</code></p>
<p>The total number of digits (base 10) of precision allowed by the ledger.</p>
<h4 id="scale">scale</h4>
<p><code><strong>scale</strong>:Number</code></p>
<p>The number of digits allowed after the decimal point.</p>
<h4 id="currencycode">currencyCode</h4>
<p><code><strong>currencyCode</strong>:String</code></p>
<p>The ISO 4217 currency code (if any) used by the ledger.</p>
<h4 id="currencysymbol">currencySymbol</h4>
<p><code><strong>currencySymbol</strong>:String</code></p>
<p>The currency symbol as one or more UTF8 characters.</p>
<h4 id="connectors">connectors</h4>
<p><code><strong>connectors</strong>:String[]</code></p>
<p>The ILP addresses of recommended connectors.</p>
<h2 id="class-pluginoptions">Class: PluginOptions</h2>
<p><code>class PluginOptions</code></p>
<p>Plugin options are passed in to the <a href="#class-ledgerplugin"><code>LedgerPlugin</code></a>
constructor when a plugin is being instantiated. The fields are ledger
specific. Any fields which cannot be represented as strings are preceded with
an underscore, and listed in the table below.</p>
<h6 id="special-fields">Special Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Object</code></td>
<td style="text-align:left"><a href="#_store">_store</a></td>
<td style="text-align:left">Persistence layer callbacks</td>
</tr>
</tbody>
</table>
<h3 id="fields-6">Fields</h3>
<h4 id="_store">_store</h4>
<p><code><strong>_store</strong>:Object</code></p>
<p>Provides callback hooks to the host&apos;s persistence layer.</p>
<p>Persistence MAY be required for internal use by some ledger plugins. For this purpose hosts MAY be configured with a persistence layer.</p>
<p>Method names are based on the popular LevelUP/LevelDOWN packages.</p>
<h6 id="example-6">Example</h6>
<pre><code class="lang-js">{
  // Store a value under a key
  put: (key, value) =&gt; {
    // Returns Promise.&lt;null&gt;
  },
  // Fetch a value by key
  get: (key) =&gt; {
    // Returns Promise.&lt;Object&gt;
  },
  // Delete a value by key
  del: (key) =&gt; {
    // Returns Promise.&lt;null&gt;
  }
}
</code></pre>
<h2 id="class-connectoptions">Class: ConnectOptions</h2>
<p><code>class ConnectOptions</code></p>
<h6 id="fields-7">Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Type</th>
<th style="text-align:left">Name</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>Number</code></td>
<td style="text-align:left">timeout</td>
<td style="text-align:left">milliseconds</td>
</tr>
</tbody>
</table>
<h3 id="fields-8">Fields</h3>
<h4 id="id-2">id</h4>
<p><code><strong>timeout</strong>:Number</code></p>
<p>The number of milliseconds that the plugin should spend trying to connect before giving up.</p>
<p>If falsy, use the plugin&apos;s default timeout.
If <code>Infinity</code>, there is no timeout.</p>
<h2 id="class-rejectionmessage">Class: RejectionMessage</h2>
<p><code>class RejectionMessage</code></p>
<h6 id="fields-9">Fields</h6>
<table class="table table-striped">
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Type</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>code</code></td>
<td style="text-align:left">String</td>
<td style="text-align:left">Machine-readable error code</td>
</tr>
<tr>
<td style="text-align:left"><code>name</code></td>
<td style="text-align:left">String</td>
<td style="text-align:left">Human-readable description of the error code</td>
</tr>
<tr>
<td style="text-align:left"><code>message</code></td>
<td style="text-align:left">String</td>
<td style="text-align:left">Description of the error</td>
</tr>
<tr>
<td style="text-align:left"><code>triggered_by</code></td>
<td style="text-align:left">ILP Address or ILP Prefix</td>
<td style="text-align:left">ILP address or ledger prefix from which the rejection originates</td>
</tr>
<tr>
<td style="text-align:left"><code>forwarded_by</code></td>
<td style="text-align:left">ILP Address</td>
<td style="text-align:left">(optional) The address of the last connector to forward the rejection</td>
</tr>
<tr>
<td style="text-align:left"><code>triggered_at</code></td>
<td style="text-align:left">Timestamp</td>
<td style="text-align:left">(optional) The time the rejection occurred.</td>
</tr>
<tr>
<td style="text-align:left"><code>additional_info</code></td>
<td style="text-align:left">Object</td>
<td style="text-align:left">Additional details about the error</td>
</tr>
</tbody>
</table>

        </div>
      </div>

    </div> <!-- /container -->

    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            <div class="col-sm-4 col-xs-12">
              <p>Interledger Team</p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="text-center">See list of <a target="_blank" href="https://www.w3.org/community/interledger/participants">Contributors</a></p>
            </div>
            <div class="col-sm-4 col-xs-12">
              <p class="pull-right">Documentation licensed under <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0.</a></p>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-68500608-1', 'auto');
      ga('send', 'pageview');

    </script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
